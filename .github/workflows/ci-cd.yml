name: CI Build PartsUnlimited

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  build:
    runs-on: windows-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Setup NuGet
      uses: NuGet/setup-nuget@v1

    - name: Restore NuGet packages
      run: nuget restore PartsUnlimited.sln

    - name: Build PartsUnlimitedWebsite project (Release, .NET 4.8)
      run: msbuild "src/PartsUnlimitedWebsite/PartsUnlimitedWebsite.csproj" /p:Configuration=Release /p:Platform="Any CPU"

    - name: Build DepValidation project (Release, .NET 4.8)
      run: msbuild "PartsUnlimited.DepValidation/PartsUnlimited.DepValidation.modelproj" /p:Configuration=Release /p:Platform="Any CPU"

    # Si plus tard tu veux activer les tests unitaires (apr√®s migration 4.8)
    #- name: Build Unit Tests (Release, .NET 4.8)
    #  run: msbuild "test/PartsUnlimited.UnitTests/PartsUnlimited.UnitTests.csproj" /p:Configuration=Release /p:Platform="Any CPU"
